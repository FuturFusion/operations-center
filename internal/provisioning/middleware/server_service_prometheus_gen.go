// Code generated by mockery. DO NOT EDIT.
// template: github.com/FuturFusion/operations-center/internal/metrics/prometheus.gotmpl

package middleware

import (
	"context"
	"time"

	"github.com/FuturFusion/operations-center/internal/domain"
	"github.com/FuturFusion/operations-center/internal/provisioning"
	"github.com/FuturFusion/operations-center/shared/api"
	"github.com/google/uuid"
	"github.com/prometheus/client_golang/prometheus"
	"github.com/prometheus/client_golang/prometheus/promauto"
)

// ServerServiceWithPrometheus implements provisioning.ServerService interface with all methods wrapped
// with Prometheus metrics.
type ServerServiceWithPrometheus struct {
	base         provisioning.ServerService
	instanceName string
}

var serverServiceDurationSummaryVec = promauto.NewSummaryVec(
	prometheus.SummaryOpts{
		Name:       "server_service_duration_seconds",
		Help:       "serverService runtime duration and result",
		MaxAge:     time.Minute,
		Objectives: map[float64]float64{0.5: 0.05, 0.9: 0.01, 0.99: 0.001},
	},
	[]string{"instance_name", "method", "result"},
)

// NewServerServiceWithPrometheus returns an instance of the provisioning.ServerService decorated with prometheus summary metric.
func NewServerServiceWithPrometheus(base provisioning.ServerService, instanceName string) ServerServiceWithPrometheus {
	return ServerServiceWithPrometheus{
		base:         base,
		instanceName: instanceName,
	}
}

// Create implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) Create(ctx context.Context, token uuid.UUID, server provisioning.Server) (server1 provisioning.Server, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "Create", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.Create(ctx, token, server)
}

// DeleteByName implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) DeleteByName(ctx context.Context, name string) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "DeleteByName", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.DeleteByName(ctx, name)
}

// EvacuateSystemByName implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) EvacuateSystemByName(ctx context.Context, name string) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "EvacuateSystemByName", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.EvacuateSystemByName(ctx, name)
}

// GetAll implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) GetAll(ctx context.Context) (servers provisioning.Servers, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "GetAll", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.GetAll(ctx)
}

// GetAllNames implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) GetAllNames(ctx context.Context) (strings []string, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "GetAllNames", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.GetAllNames(ctx)
}

// GetAllNamesWithFilter implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) GetAllNamesWithFilter(ctx context.Context, filter provisioning.ServerFilter) (strings []string, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "GetAllNamesWithFilter", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.GetAllNamesWithFilter(ctx, filter)
}

// GetAllWithFilter implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) GetAllWithFilter(ctx context.Context, filter provisioning.ServerFilter) (servers provisioning.Servers, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "GetAllWithFilter", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.GetAllWithFilter(ctx, filter)
}

// GetByName implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) GetByName(ctx context.Context, name string) (server *provisioning.Server, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "GetByName", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.GetByName(ctx, name)
}

// GetSystemProvider implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) GetSystemProvider(ctx context.Context, name string) (v provisioning.ServerSystemProvider, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "GetSystemProvider", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.GetSystemProvider(ctx, name)
}

// GetSystemUpdate implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) GetSystemUpdate(ctx context.Context, name string) (v provisioning.ServerSystemUpdate, err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "GetSystemUpdate", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.GetSystemUpdate(ctx, name)
}

// PollServer implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) PollServer(ctx context.Context, server provisioning.Server, updateServerConfiguration bool) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "PollServer", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.PollServer(ctx, server, updateServerConfiguration)
}

// PollServers implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) PollServers(ctx context.Context, serverStatus api.ServerStatus, updateServerConfiguration bool) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "PollServers", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.PollServers(ctx, serverStatus, updateServerConfiguration)
}

// PoweroffSystemByName implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) PoweroffSystemByName(ctx context.Context, name string) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "PoweroffSystemByName", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.PoweroffSystemByName(ctx, name)
}

// RebootSystemByName implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) RebootSystemByName(ctx context.Context, name string) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "RebootSystemByName", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.RebootSystemByName(ctx, name)
}

// Rename implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) Rename(ctx context.Context, oldName string, newName string) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "Rename", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.Rename(ctx, oldName, newName)
}

// ResyncByName implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) ResyncByName(ctx context.Context, clusterName string, event domain.LifecycleEvent) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "ResyncByName", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.ResyncByName(ctx, clusterName, event)
}

// SelfRegisterOperationsCenter implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) SelfRegisterOperationsCenter(ctx context.Context) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "SelfRegisterOperationsCenter", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.SelfRegisterOperationsCenter(ctx)
}

// SelfUpdate implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) SelfUpdate(ctx context.Context, serverUpdate provisioning.ServerSelfUpdate) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "SelfUpdate", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.SelfUpdate(ctx, serverUpdate)
}

// SetClusterService implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) SetClusterService(clusterSvc provisioning.ClusterService) {
	_since := time.Now()
	defer func() {
		result := "ok"
		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "SetClusterService", result).Observe(time.Since(_since).Seconds())
	}()
	_d.base.SetClusterService(clusterSvc)
}

// SyncCluster implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) SyncCluster(ctx context.Context, clusterName string) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "SyncCluster", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.SyncCluster(ctx, clusterName)
}

// Update implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) Update(ctx context.Context, server provisioning.Server, updateSystem bool) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "Update", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.Update(ctx, server, updateSystem)
}

// UpdateSystemByName implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) UpdateSystemByName(ctx context.Context, name string, updateRequest api.ServerUpdatePost) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "UpdateSystemByName", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.UpdateSystemByName(ctx, name, updateRequest)
}

// UpdateSystemNetwork implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) UpdateSystemNetwork(ctx context.Context, name string, networkConfig provisioning.ServerSystemNetwork) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "UpdateSystemNetwork", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.UpdateSystemNetwork(ctx, name, networkConfig)
}

// UpdateSystemProvider implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) UpdateSystemProvider(ctx context.Context, name string, providerConfig provisioning.ServerSystemProvider) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "UpdateSystemProvider", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.UpdateSystemProvider(ctx, name, providerConfig)
}

// UpdateSystemStorage implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) UpdateSystemStorage(ctx context.Context, name string, networkConfig provisioning.ServerSystemStorage) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "UpdateSystemStorage", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.UpdateSystemStorage(ctx, name, networkConfig)
}

// UpdateSystemUpdate implements provisioning.ServerService.
func (_d ServerServiceWithPrometheus) UpdateSystemUpdate(ctx context.Context, name string, updateConfig provisioning.ServerSystemUpdate) (err error) {
	_since := time.Now()
	defer func() {
		result := "ok"
		if err != nil {
			result = "error"
		}

		serverServiceDurationSummaryVec.WithLabelValues(_d.instanceName, "UpdateSystemUpdate", result).Observe(time.Since(_since).Seconds())
	}()
	return _d.base.UpdateSystemUpdate(ctx, name, updateConfig)
}

// Code generated by generate-expr. DO NOT EDIT.

package inventory

import (
	"time"

	"github.com/google/uuid"
	"github.com/lxc/incus/v6/shared/api"
)

type ExprApiImage struct {
	ExprApiImagePut `yaml:",inline"`
	Aliases         []ExprApiImageAlias `json:"aliases" yaml:"aliases" expr:"aliases"`
	Architecture    string              `json:"architecture" yaml:"architecture" expr:"architecture"`
	Cached          bool                `json:"cached" yaml:"cached" expr:"cached"`
	Filename        string              `json:"filename" yaml:"filename" expr:"filename"`
	Fingerprint     string              `json:"fingerprint" yaml:"fingerprint" expr:"fingerprint"`
	Size            int64               `json:"size" yaml:"size" expr:"size"`
	UpdateSource    *ExprApiImageSource `json:"update_source,omitempty" yaml:"update_source,omitempty" expr:"update_source"`
	Type            string              `json:"type" yaml:"type" expr:"type"`
	CreatedAt       time.Time           `json:"created_at" yaml:"created_at" expr:"created_at"`
	LastUsedAt      time.Time           `json:"last_used_at" yaml:"last_used_at" expr:"last_used_at"`
	UploadedAt      time.Time           `json:"uploaded_at" yaml:"uploaded_at" expr:"uploaded_at"`
	Project         string              `json:"project" yaml:"project" expr:"project"`
}

type ExprApiImageAlias struct {
	Name        string `json:"name" yaml:"name" expr:"name"`
	Description string `json:"description" yaml:"description" expr:"description"`
}

type ExprApiImagePut struct {
	AutoUpdate bool              `json:"auto_update" yaml:"auto_update" expr:"auto_update"`
	Properties map[string]string `json:"properties" yaml:"properties" expr:"properties"`
	Public     bool              `json:"public" yaml:"public" expr:"public"`
	ExpiresAt  time.Time         `json:"expires_at" yaml:"expires_at" expr:"expires_at"`
	Profiles   []string          `json:"profiles" yaml:"profiles" expr:"profiles"`
}

type ExprApiImageSource struct {
	Alias       string `json:"alias" yaml:"alias" expr:"alias"`
	Certificate string `json:"certificate" yaml:"certificate" expr:"certificate"`
	Protocol    string `json:"protocol" yaml:"protocol" expr:"protocol"`
	Server      string `json:"server" yaml:"server" expr:"server"`
	ImageType   string `json:"image_type" yaml:"image_type" expr:"image_type"`
}

type ExprImage struct {
	ID          int                   `json:"-" expr:"-"`
	UUID        uuid.UUID             `json:"uuid"          db:"primary=yes" expr:"uuid"`
	Cluster     string                `json:"cluster"       db:"leftjoin=clusters.name" expr:"cluster"`
	ProjectName string                `json:"project"       db:"sql=images.project_name" expr:"project"`
	Name        string                `json:"name" expr:"name"`
	Object      ExprIncusImageWrapper `json:"object" expr:"object"`
	LastUpdated time.Time             `json:"last_updated"  db:"update_timestamp" expr:"last_updated"`
}

type ExprIncusImageWrapper struct {
	ExprApiImage `json:"-" expr:"-"`
}

func ToExprApiImage(i api.Image) ExprApiImage {
	return ExprApiImage{
		ExprApiImagePut: ToExprApiImagePut(i.ImagePut),
		Aliases:         sliceConvert(i.Aliases, ToExprApiImageAlias),
		Architecture:    i.Architecture,
		Cached:          i.Cached,
		Filename:        i.Filename,
		Fingerprint:     i.Fingerprint,
		Size:            i.Size,
		UpdateSource:    toPtr(ToExprApiImageSource(fromPtr(i.UpdateSource))),
		Type:            i.Type,
		CreatedAt:       i.CreatedAt,
		LastUsedAt:      i.LastUsedAt,
		UploadedAt:      i.UploadedAt,
		Project:         i.Project,
	}
}

func ToExprApiImageAlias(i api.ImageAlias) ExprApiImageAlias {
	return ExprApiImageAlias{
		Name:        i.Name,
		Description: i.Description,
	}
}

func ToExprApiImagePut(i api.ImagePut) ExprApiImagePut {
	return ExprApiImagePut{
		AutoUpdate: i.AutoUpdate,
		Properties: i.Properties,
		Public:     i.Public,
		ExpiresAt:  i.ExpiresAt,
		Profiles:   i.Profiles,
	}
}

func ToExprApiImageSource(i api.ImageSource) ExprApiImageSource {
	return ExprApiImageSource{
		Alias:       i.Alias,
		Certificate: i.Certificate,
		Protocol:    i.Protocol,
		Server:      i.Server,
		ImageType:   i.ImageType,
	}
}

func ToExprImage(i Image) ExprImage {
	return ExprImage{
		ID:          i.ID,
		UUID:        i.UUID,
		Cluster:     i.Cluster,
		ProjectName: i.ProjectName,
		Name:        i.Name,
		Object:      ToExprIncusImageWrapper(i.Object),
		LastUpdated: i.LastUpdated,
	}
}

func ToExprIncusImageWrapper(i IncusImageWrapper) ExprIncusImageWrapper {
	return ExprIncusImageWrapper{
		ExprApiImage: ToExprApiImage(i.Image),
	}
}
